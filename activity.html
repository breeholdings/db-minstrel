<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>D&B Minstrel — Activity</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
* { box-sizing: border-box; margin:0; padding:0; font-family:'Montserrat',sans-serif; }
body { background:#0A0F1E; color:#fff; min-height:100vh; }
.container { max-width:900px; margin:50px auto; padding:20px; }

.dashboard-wrapper { display:flex; flex-direction:column; min-height:100vh; background:#0A0F1E; color:#fff; }
.dashboard-content { display:flex; flex:1; overflow:hidden; }

/* Sidebar */
.sidebar {
  width:250px; background:#10162E; padding:30px 20px; display:flex; flex-direction:column; gap:20px; height:100%; overflow-y:auto; position:sticky; top:0;
}
.sidebar h2 { color:#A6C8FF; margin-bottom:20px; text-align:center; }
.sidebar a { display:flex; align-items:center; gap:15px; padding:10px 15px; color:#fff; border-radius:10px; transition:0.3s; white-space: nowrap; }
.sidebar a:hover { background:#2D6DAB; }

h1 { color:#A6C8FF; margin-bottom:20px; text-align:center; }
.activity-list { list-style:none; margin-top:10px; }
.activity-list li { background:#10162E; padding:15px; border-radius:10px; margin-bottom:10px; box-shadow:0 3px 10px rgba(0,0,0,0.3); display:flex; justify-content:space-between; align-items:center; }
.activity-list li span { color:#A6C8FF; font-weight:600; }
.back-btn { display:inline-block; margin-bottom:20px; padding:8px 18px; border-radius:25px; background:#2D6DAB; color:#fff; font-weight:600; text-decoration:none; transition:0.3s; }
.back-btn:hover { background:#4092D0; }
#searchInput { width:100%; padding:10px; border-radius:10px; border:none; margin-bottom:20px; background:#10162E; color:#fff; }
.activity-date { font-size:0.8rem; color:#ccc; margin-left:10px; white-space:nowrap; }

/* Footer */
footer { text-align:center; padding:20px 5%; background:#10162E; color:#fff; border-top:1px solid #4092D0; flex-shrink:0; }

/* Responsive */
@media(max-width:900px){ .dashboard-content { flex-direction: column; } .sidebar { width:100%; height:auto; flex-direction:row; overflow-x:auto; padding:15px; } .sidebar a { white-space: nowrap; } .main { padding:20px; } .stats { flex-direction:column; }}

</style>
</head>
<body>
<div class="dashboard-wrapper">

  <div class="dashboard-content">

    <div class="sidebar">
        <div class="sidebar-logo" style="text-align:center; margin-bottom:15px;">
    <img src="logo.jpeg" alt="D&B Minstrel Logo" style="width:80px; height:80px; border-radius:50%; border:2px solid #A6C8FF;">
  </div>
      <h2>D&B Minstrel</h2>
      <a href="artist_dashboard.html"><i class="fa-solid fa-house"></i> Dashboard</a>
      <a href="artist_dashboard.html" id="sidebarUploadBtn"><i class="fa-solid fa-upload"></i> Upload Track</a>
      <a href="releases.html"><i class="fa-solid fa-music"></i> My Songs</a>
      <a href="analytics.html"><i class="fa-solid fa-chart-line"></i> Analytics</a>
      <a href="activity.html"><i class="fa-solid fa-book"></i> Activity</a>
      <a href="payments.html"><i class="fa-solid fa-wallet"></i> Payments</a>
      <a href="settings.html"><i class="fa-solid fa-user-cog"></i> Settings</a>
      <a href="support.html"><i class="fa-solid fa-circle-question"></i> Support</a>
    </div>

  <div class="container">
    <a href="artist_dashboard.html" class="back-btn"><i class="fa-solid fa-arrow-left"></i> Back to Dashboard</a>
    <h1>All Activities</h1>
    <input type="text" id="searchInput" placeholder="Search activities...">
    <ul class="activity-list" id="allActivityList"></ul>
  </div>
  </div>

    <footer>© 2025 D&B Minstrel | All rights reserved</footer>

<script>
const allActivityList = document.getElementById('allActivityList');
const searchInput = document.getElementById('searchInput');

// Load activities from localStorage
let activityData = JSON.parse(localStorage.getItem('activityData') || '[]');

// Ensure proper structure, **only fix old string-only entries**
activityData = activityData.map(a => {
  if (a && typeof a === 'object' && a.timestamp) {
    return a; // already has correct timestamp
  } else if (typeof a === 'string') {
    return { message: a, timestamp: Date.now() }; // legacy string entry
  } else {
    return a; // leave as is if already well-formed
  }
});

// Sort by timestamp descending (newest first)
activityData.sort((a,b) => b.timestamp - a.timestamp);

// Render activities
function renderActivities(data){
  allActivityList.innerHTML = '';
  data.forEach(entry => {
    const li = document.createElement('li');
    li.innerHTML = `<span>${entry.message}</span> <span class="activity-date">${new Date(entry.timestamp).toLocaleString()}</span>`;
    allActivityList.appendChild(li);
  });
}

// Save a new activity with exact timestamp
function saveActivity(message, timestamp = null){
  const entry = { message, timestamp: timestamp || Date.now() };
  activityData.unshift(entry);
  localStorage.setItem('activityData', JSON.stringify(activityData));
  renderActivities(activityData);
}

// Initial render
renderActivities(activityData);

// Search filter
searchInput.addEventListener('input', function(){
  const term = this.value.toLowerCase();
  const filtered = activityData.filter(a => a.message.toLowerCase().includes(term));
  renderActivities(filtered);
});
</script>


</body>
</html>
